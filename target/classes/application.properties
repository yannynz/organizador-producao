# Nome da aplicação
spring.application.name=organizador-producao

# Configuração do banco de dados - Ambiente padrão (produção/desenvolvimento)
spring.datasource.url=jdbc:postgresql://postgres-container:5432/teste01
spring.datasource.username=postgres
spring.datasource.password=1234
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.time_zone=America/Sao_Paulo

# Configuração do RabbitMQ - Ambiente padrão
spring.rabbitmq.host=rabbitmq-container
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.rabbitmq.virtual-host=/
spring.rabbitmq.port=5672

admin.password=3aa4e159f67db67dff930ce90b1ebe8048c277589c950be516dd779ec4a988c4

management.endpoints.web.exposure.include=health,info,mappings,metrics,prometheus
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.enable.jvm=true
management.metrics.enable.system=true
management.metrics.distribution.percentiles[organizador_http_server_latency_seconds]=0.5,0.95,0.99
management.metrics.distribution.percentile-histogram[organizador_http_server_latency_seconds]=true
management.metrics.distribution.percentiles[organizador_message_processing_seconds]=0.5,0.95,0.99
management.metrics.distribution.percentile-histogram[organizador_message_processing_seconds]=true
server.error.include-message=always
server.error.include-binding-errors=always

# Credenciais SMB (defina via env no container)
app.smb.domain=
app.smb.username=smb_reader
app.smb.password=

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.jpa.hibernate.ddl-auto=update
spring.flyway.baseline-on-migrate=true
spring.flyway.out-of-order=true

# ==== RPC Ping/Pong (FileWatcher) ====
app.rpc.filewatcher.queue=filewatcher.rpc.ping
app.rpc.filewatcher.timeout-ms=2000
app.rpc.filewatcher.direct-reply-to=true
app.ws.status.topic=/topic/status

spring.rabbitmq.template.receive-timeout=2000
spring.rabbitmq.template.reply-timeout=2000
spring.rabbitmq.template.use-temporary-reply-queues=true

# Optional local responder for RPC ping (disabled by default)
app.rpc.filewatcher.stub.enabled=false

# Silence noisy error logs when late replies occur on direct-reply-to
logging.level.org.springframework.amqp.rabbit.listener.DirectReplyToMessageListenerContainer=OFF

# CORS allowed origins (comma-separated, overridable via env APP_CORS_ALLOWED_ORIGINS)
app.cors.allowed-origins=http://localhost:4200,http://localhost,http://nginx-container,http://nginx-container:80,http://frontend-container

# ==== DXF Complexity Engine integration ====
app.dxf.analysis.request-queue=facas.analysis.request
app.dxf.analysis.result-queue=facas.analysis.result
app.dxf.analysis.websocket-topic=/topic/dxf-analysis
app.dxf.analysis.image-base-url=
# app.dxf.analysis.image-local-roots[0]=/opt/shared/renders
app.dxf.analysis.order-number-pattern=(?i)(?:NR|CL)\s*(\d+)

# ==== Security / JWT ====

security.jwt.secret-key=7GrySCKTnOgonS82hAeZiSuQFEfvpLKVYYz8wY7KNAg=

security.jwt.expiration-time=86400000



# ==== Email Configuration ====

spring.mail.host=${MAIL_HOST:smtp.gmail.com}

spring.mail.port=${MAIL_PORT:587}

spring.mail.username=${MAIL_USERNAME:}

spring.mail.password=${MAIL_PASSWORD:}

spring.mail.properties.mail.smtp.auth=true

spring.mail.properties.mail.smtp.starttls.enable=true



# ==== Frontend Configuration ====

app.frontend.url=${APP_FRONTEND_URL:http://localhost:4200}


